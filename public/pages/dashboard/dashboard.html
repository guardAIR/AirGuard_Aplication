<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | AirGuard</title>
    <link rel="stylesheet" href="/css/dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

</head>

<body onload="dados(); getAlertaById();">
    <nav class="horizontal_nav">
        <a href="/index.html" class="logo">
            <img src="/assets/dashboard/logo.svg">
        </a>
        <div class="links">
            <ul>
                <li><a href="/pages/sobre-nos/sobre_nos.html">Sobre nós</a></li>
                <li><a href="/pages/calculadora/calculadora.html">Orçamento</a></li>
                <li><a href="./dashboard_area.html" class="destaque_link">Dashboard Área</a></li>
            </ul>
        </div>
    </nav>
    <nav class="vertical_nav">
        <ul>
            <li><a href="dashboard.html" class="active"><span class="material-symbols-outlined">domain</span></a></li>
            <li><a href="dashboard_area.html"><span class="material-symbols-outlined">location_on</span></a></li>
            <li><a href="perfil.html"><span class="material-symbols-outlined">account_circle</span></a></li>
        </ul>
    </nav>

    <section>
        <div class="dashboard_header">
            <h1>Medição geral</h1>
            <p>Bem-vindo de volta, <strong id="NomeUsuario">Air Guard ADM</strong></p>
        </div>
        <div class="dashboard_cards">
            <div class="left">
                <div class="row row2">
                    <div class="card card3">
                        <h3>5 Áreas com a maior concentração de CO</h3>
                        <button onclick="showLegends()" class="show_legends">
                            <span class="material-symbols-outlined">
                                info
                            </span>
                        </button>
                        <div style="width:100%; height:230px;">
                            <canvas id="rankingCOChart"></canvas>
                        </div>
                        <div class="ranking_legend hidden">
                            <p><strong>Legenda:</strong></p>
                            <ul>
                                <li><span class="legend_color blackred_bar"></span> Acima de 39 ppm – Perigoso
                                    (vermelho escuro)</li>
                                <li><span class="legend_color red_bar"></span> Até 39 ppm – Alerta (vermelho)</li>
                                <li><span class="legend_color yellow_bar"></span> Até 30 ppm – Atenção (amarelo)</li>
                                <li><span class="legend_color green_bar"></span> Até 20 ppm – Nível seguro (verde)</li>
                            </ul>
                            <p><em>Observação:</em> 100% representa 39 ppm. Valores acima disso estão além do limite
                                seguro recomendado.</p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="card card1">
                        <h3>Distribuição de áreas por nível de risco</h3>
                        <div class="kpi_card1">
                            <span>Total de áreas monitoradas:</span><br>
                            <span class="kpi_destaque" id="kpiTotalAreas">0</span> <br><br>
                        </div>
                        <div class="kpi_card2">
                            <span>Áreas acima do limite:</span><br>
                            <span class="kpi_destaque" id="kpiAreasPerigosas">0</span>
                        </div>
                        <canvas id="COperArea"></canvas>
                    </div>
                </div>
            </div>
            <div class="right">
                <div class="card card4">
                    <h3>Alertas</h3>
                    <div class="alerts" id="alert"></div>
                </div>
            </div>
        </div>
    </section>
    <a href="https://airguard2025.atlassian.net/servicedesk/customer/portal/1" target="_blank" id="botao-suporte" title="Precisa de ajuda?">
        <i class="fas fa-comment-dots"></i>
        <img src="../../assets/suporte/suporte.png" alt="">
        </a>
</body>

</html>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script
    src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0/dist/chartjs-plugin-annotation.min.js"></script>
<script src="../../js/geralDashboards.js"></script>

<script>
    function dados() {
        var nome = sessionStorage.NOME_USUARIO;
        var sobrenome = sessionStorage.SOBRENOME_USUARIO;

        NomeUsuario.innerHTML = `${nome} ${sobrenome}`;
    }

    function showLegends(){
        const local = document.getElementsByClassName('ranking_legend')[0];

        if(local.classList.contains('hidden')){
            local.classList.remove('hidden')
        }else{
            local.classList.add('hidden')
        }

    }
</script>